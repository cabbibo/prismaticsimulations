




<html>
  <head>

      <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="viewport" content="width=device-width">
    <title>blarp</title>
    <style>
@font-face {
  font-family: 'Poppins';
  src: url('Poppins-Black.ttf');  
}
      body{margin: 0px;font-family:'Poppins';background:#000;}
      #container{
        position:fixed;
        height:50px;
      }

      h1{
        z-index: 100;
        color:#fff;
        position:relative;
      }

      p{
        font-family:'Poppins';
        position: absolute;
        z-index: 100;
      }

      #blank{
        position:relative;
        height:120%;
        //background: #f00;
      }#blank2{
        position:relative;
        height:80%;
        //background: #f00;
      }


      #cool{
        position:relative;
       // background: #000;
        color:#fff;
        font-size:30px;
        text-align :center;
        padding:50px;
      }

      #available{
        position:relative;
        //background: #000;
        color:#fff;
        font-size:30px;
        text-align :center;
        padding:50px;
      }

      #available img{
        width:100%;
      }


      #iphone{

        left:50%;
  border-radius: 50px; 

  margin-left:-150px;
  width:300px; 
  height:600px; 
  position:relative;
  z-index: 10;
}

#isss{
  z-index: 20;
  position:relative;
}

#trailerVideo{
  margin-top:-600px;
  z-index: -10;
}
a{
  color:#eee;
}
a:hover{
  color:#fff;
}



    </style>
  </head>
  <body>
    <link rel="manifest" href="manifest.json">

    <div id="container"></div>

    <p>

      <div id="cool">
        <h1> blarp </h1>
        An iOS game <br/>full of physics and delight
        <br/>
      </div>

          <div id="iphone" >
            <img id="isss" src="../FacePlant/IPhone_X.png" style="margin:0px;width:100%; height:100%;"></img>
            <video id="trailerVideo" autoplay=true src="preview.mp4" style="border-radius:30px; padding:10%;padding-top:20%;padding-bottom:20%; width:80%; height:80%;background: #000">

            </video>
        
          <div>
      <div id="available">
        <a href="https://apps.apple.com/us/app/blarp/id1495609566?ls=1"><img src="appStore.png" /></a><br/><br/>
        <a href="mailto:hello@prismaticsimulations.com">Contact Us</a>
      </div>

  </p>
 <!--<script id="vertexShader" type="x-shader/x-vertex">


      varying vec2 vUv;
      varying float height;
      uniform float time;

      void main()
      {

        vec4 wPos = modelMatrix * vec4( position, 1.0 );

        vec4 mvPos = modelViewMatrix * vec4( position, 1.0 );
        vUv = uv;
        height = wPos.z;
        gl_Position = projectionMatrix * mvPos;

      }

    </script>

    <script id="fragmentShader" type="x-shader/x-fragment">

      varying vec2 vUv;
      varying float height;

      uniform float time;
      uniform float ratio;
      uniform sampler2D _Texture;
      uniform sampler2D _FontTexture;
      uniform sampler2D _HeightTexture;
      uniform sampler2D _ColorMap;

      uniform float scrollVal;

      void main() {

      vec2 uv = vUv * 4. - 1.5;


       // vUv.x += sin( mvPos.z * 20.  + time + mvPos.x) ;


        vec2 fontUV = uv+ vec2(0. , -scrollVal *1.5);
        vec4 font = texture2D(_FontTexture,fontUV);

        vec4 fontL = texture2D(_FontTexture,fontUV + vec2(.0001,0.));
        vec4 fontR = texture2D(_FontTexture,fontUV - vec2(.0001,0.));
        vec4 fontU = texture2D(_FontTexture,fontUV + vec2(0.,.0001));
        vec4 fontD = texture2D(_FontTexture,fontUV - vec2(0.,.0001));

        vec2 d = normalize(vec2(( fontL.a - fontR.a ) , (fontU.a - fontD.a))) * font.a;

        vec2 fUV = uv * .5;

        if( font.a > 0.1){
          fUV += d*d*d* 4.3 * height;
        }





        fUV.x += sin( height * 8.  + time + fUV.x * 10. + fUV.y * 10.) * .003 ;
        fUV.y += sin( height * 5.  + time * 1.3 + 10. + fUV.x * 10. + fUV.y * 10.) * .003;
        if( font.a > .8){ }
        vec4 hair = texture2D(_Texture, fUV * 2. );
        vec4 heightCol = texture2D(_HeightTexture, fUV * 2. );

        vec4 color = hair;//vec4(d * .5 + .5 , 0., 1.);//font;

        float cutoffVal =  font.a;
         cutoffVal -= sin( uv.x * 20. + time) * .01;
        cutoffVal -= sin( uv.y * 24. + time) * .01;
        if( color.x > .6 - 1.*height  * heightCol.x && cutoffVal < .5){ discard; }

        vec4 c = texture2D(_ColorMap, vec2(height*6.)); 
        color = 3.*c * heightCol.x * .6;

        if( cutoffVal > .5){ color = texture2D(_ColorMap, vec2(1.-height*6. +  (uv.x + uv.y) * .8 + .7));}
       // color = vec4(1.);// * color.a; //vec4(sin( height * 20.),0.,0.,1.) * (color.x);
        gl_FragColor = color * min( height * height * 200. , 1.);
      }

    </script>


    <script src = "jquery.min.js"         ></script>
    <script src = "three.js"              ></script>
    <script src = "underscore.js"         ></script>
    <script src = "ShaderLoader.js"       ></script>

    <script>
    var container;

      var camera, scene, renderer;

      var uniforms;

      init();
      animate();


var SCREEN_WIDTH = window.innerWidth;
      var SCREEN_HEIGHT = window.innerHeight;
      


      function init() {


        var textureLoader = new THREE.TextureLoader();
        var texture1 = textureLoader.load( "dotTexture.jpg" );
        var texture2 = textureLoader.load( "titlesdf.png" );
        var texture5 = textureLoader.load( "titlesdf.png" );
        var texture3 = textureLoader.load( "height.png" );
        var texture4 = textureLoader.load( "color4.png" );
        texture1.wrapS = texture1.wrapT = THREE.RepeatWrapping;
        texture3.wrapS = texture3.wrapT = THREE.RepeatWrapping;
        texture4.wrapS = texture4.wrapT = THREE.RepeatWrapping;

        container = document.getElementById( 'container' );

        camera= new THREE.PerspectiveCamera( 40, SCREEN_WIDTH / SCREEN_HEIGHT, .11, 1000 );
        camera.position.z = 2;
        scene = new THREE.Scene();
        

        var geometry = new THREE.PlaneGeometry(1  ,1 );

        var ratio = .5 / 3;

        uniforms = {
          "time": { value: 1.0 },
          "ratio": { value: ratio },
          "scrollVal": { value: 0 },
          "_Texture" : { value : texture1 },
          "_FontTexture" : { value : texture2 },
          "_FontTexture2" : { value : texture5 },
          "_HeightTexture" : { value : texture3 },
          "_ColorMap" : { value : texture4 }
        };

        var material = new THREE.ShaderMaterial( {

          uniforms: uniforms,
          vertexShader: document.getElementById( 'vertexShader' ).textContent,
          fragmentShader: document.getElementById( 'fragmentShader' ).textContent,
          side: THREE.DoubleSide
        } );

       // material = new THREE.MeshNormalMaterial();

        var mesh;

        for( var i = 0; i < 5 ; i++ ){
          mesh = new THREE.Mesh( geometry, material );
          mesh.position.z = i/5 * .05;
          scene.add( mesh );
        }

        renderer = new THREE.WebGLRenderer();
        renderer.setPixelRatio( window.devicePixelRatio );
        container.appendChild( renderer.domElement );

        onWindowResize();

        window.addEventListener( 'resize', onWindowResize, false );

      }

      function onWindowResize() {
        
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize( window.innerWidth, window.innerHeight );

      }

      //
      var scrollY = 0;
      var scrollVel =0;
      function animate( timestamp ) {

      var body = document.body,
      html = document.documentElement;
      docHeight = Math.max( body.scrollHeight, body.offsetHeight, 
                       html.clientHeight, html.scrollHeight, html.offsetHeight );
   
    
        requestAnimationFrame( animate );
        var scrolledAmount = document.scrollingElement.scrollTop / ( docHeight- window.innerHeight);
         uniforms[ "time" ].value = timestamp / 1000;
        uniforms[ "scrollVal" ].value = scrolledAmount;

        renderer.render( scene, camera );

        scrollVel *= .9;
        scrollY += scrollVel;

        if( down ){
          scrollVel -= .006 * (y -oY);
        }


      }


function isMobileDevice() {
    return (typeof window.orientation !== "undefined") || (navigator.userAgent.indexOf('IEMobile') !== -1);
};


//if (!isMobileDevice()) {
//document.body.addEventListener('mousedown',mousedown);
//document.body.addEventListener('mousemove',mousemove);
//document.body.addEventListener('mouseup',mouseup);
//}else{
//console.log("hmm");
//document.body.addEventListener('touchstart',touchdown);
//document.body.addEventListener('touchmove',touchmove);
//document.body.addEventListener('touchend'  ,touchup);
//}

window.addEventListener('scroll' , scroll);
function scroll( evt ){
}


var oY = 0;
var y = 0;
var down;
function mousedown(evt){
  down = true;
  oY = evt.clientY;
  
  y = evt.clientY;
}


function mousemove(evt){
  if( down == true ){
    oY = y;
    y = evt.clientY;
    console.log( evt );
  } 
}

function mouseup(evt){
  down = false;
}


function touchdown(evt){
  down = true;
  console.log( evt.touches[0])
  oY = evt.touches[0].clientY;
  
  y = evt.touches[0].clientY;
}


function touchmove(evt){
  if( down == true ){
    oY = y;
    y = evt.touches[0].clientY;
    console.log( evt );
  } 
}

function touchup(evt){
  down = false;
}
    </script>-->
  </body>
</html>